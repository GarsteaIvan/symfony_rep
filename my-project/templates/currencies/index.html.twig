{% extends 'base.html.twig' %}

{% block title %}Hello CurrenciesController!{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="example-wrapper">
    <h1 class="" style="text-align: center">
    <button id="getUsd" class="btn btn-info">GET USD</button>
    <button id="getEur" class="btn btn-info">GET EUR</button>
    </h1>
<div id="table"></div>
    <table class="table">
        <thead class="thead-light">
        <tr>
            <th scope="col">#</th>
            <th scope="col">Usd</th>
            <th scope="col">Eur</th>
            <th scope="col">Date</th>
        </tr>
        </thead>
        <tbody id="table_body_currencies"></tbody>
    </table>
</div>

{% endblock %}
{% block javascripts %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
    <script>
        $(function () {
            $.ajax({
                url:        '/usd',
                type:       'Get',
                dataType:   'json',
                async:      true,
                success: function(data, status) {
                    $('#table_body_currencies').html('');
                    $.each(data, function (i, item) {
                        $("#table_body_currencies").append(
                            "<tr><td>"+ (i+1) +"</td>" +
                            "<td>"+item.name_usd+"</td>" +
                            "<td>"+item.name_eur+"</td>" +
                            "<td>"+item.date+"</td>" +
                            "</tr>"
                        );
                    });
                },
                error : function(xhr, textStatus, errorThrown) {
                    alert('Ajax request failed.');
                }
            });
        });

        $("#getUsd").click(function () {
            $.ajax({
                url:        '/usd',
                type:       'Get',
                dataType:   'json',
                async:      true,
                success: function(data, status) {
                    $('#table_body_currencies').html('');
                        $.each(data, function (i, item) {
                            $("#table_body_currencies").append(
                                "<tr><td>"+ (i+1) +"</td>" +
                                "<td>"+item.name_usd+"</td>" +
                                "<td>"+item.name_eur+"</td>" +
                                "<td>"+item.date+"</td>" +
                                "</tr>"
                            );
                        });
                },
                error : function(xhr, textStatus, errorThrown) {
                    alert('Ajax request failed.');
                }
            });
        });
        $("#getEur").click(function () {
            $.ajax({
                url:        '/eur',
                type:       'Get',
                dataType:   'json',
                async:      true,
                success: function(data, status) {
                    $('#table_body_currencies').html('');
                    $.each(data, function (i, item) {
                        $("#table_body_currencies").append(
                            "<tr><td>"+ (i+1) +"</td>" +
                            "<td>"+item.name_usd+"</td>" +
                            "<td>"+item.name_eur+"</td>" +
                            "<td>"+item.date+"</td>" +
                            "</tr>"
                        );
                    });
                },
                error : function(xhr, textStatus, errorThrown) {
                    alert('Ajax request failed.');
                }
            });
        });
    </script>

{% endblock %}
